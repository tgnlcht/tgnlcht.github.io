document.addEventListener("DOMContentLoaded",e=>{gsap.registerPlugin(ScrollTrigger),loadLandingAnimation(),loadHighlightSlideshow(),addNavbarAnimation(),loadMobileHighlights(),loadHorizontalAnimateHighlightWrapper(),batchSectionAnimations(),loadGallery(),loadBurgerMenu(),hideExpiredElements()});function loadSpotifyWidget(){const t=document.getElementById("spotifyToggle"),e=document.getElementById("spotifyOverlay"),n=document.getElementById("closeOverlay");t.addEventListener("click",function(t){t.stopPropagation(),e.classList.toggle("is-active")}),n.addEventListener("click",function(t){t.stopPropagation(),e.classList.remove("is-active")}),document.addEventListener("click",function(n){!e.contains(n.target)&&n.target!==t&&e.classList.remove("is-active")})}function loadMobileHighlights(){var t=document.querySelector(".carousel"),e=new Flickity(t,{imagesLoaded:!0,percentPosition:!1}),n=t.querySelectorAll(".carousel-cell img"),s=document.documentElement.style,o=typeof s.transform=="string"?"transform":"WebkitTransform";e.on("scroll",function(){e.slides.forEach(function(t,s){var i=n[s],a=(t.target+e.x)*-1/3;i.style[o]="translateX("+a+"px)"})})}function loadGallery(){let t=gsap.matchMedia(),e=100;t.add("(min-width: 1025px)",()=>{e=300}),$("#spotlightgallery").justifiedGallery({waitThumbnailsLoad:!0,rowHeight:e,lastRow:"nojustify",margins:1,captions:!1,randomize:!1}),lightbox.option({showImageNumberLabel:!1,wrapAround:!0})}function loadHorizontalAnimateHighlightWrapper(){let e=gsap.matchMedia();e.add("(min-width: 1025px)",()=>{let e=document.querySelector("#highlight-wrapper"),t=e.querySelectorAll(".highlight-panel"),n=gsap.to(t,{xPercent:-100*(t.length-1),ease:"none",scrollTrigger:{trigger:e,pin:!0,scrub:2,end:"+=3500"}});ScrollTrigger.normalizeScroll(!0)})}function loadLandingAnimation(){gsap.set(".overlay",{opacity:0}),gsap.set(".cutout-text",{y:50,opacity:0,y:50,filter:"blur(10px)"});const e=gsap.timeline();e.to(".overlay",{opacity:.8,duration:1.5,ease:"power3.out"}).to(".cutout-text",{y:0,opacity:1,duration:3,filter:"blur(0px)",ease:"power2.out"},"-=1").to(".cutout-text",{y:-5,repeat:-1,yoyo:!0,duration:3,ease:"sine.inOut"}).to(".bouncing-arrow",{opacity:1,duration:1.2,ease:"sine.inOut"},"-=5"),gsap.to(".bouncing-arrow",{y:-15,repeat:-1,yoyo:!0,duration:1.2,ease:"sine.inOut"})}function preloadImages(e,t){let n=0;e.forEach(s=>{const o=new Image;o.src=s.style.backgroundImage.slice(5,-2),o.onload=()=>{n++,n===e.length&&t()}})}function loadHighlightSlideshow(){let t=gsap.matchMedia();var e;t.add("(min-width: 1025px)",()=>{e=document.querySelectorAll(".slide.is-hidden-touch")}),t.add("(max-width: 1024px)",()=>{e=document.querySelectorAll(".slide.is-hidden-desktop")});const n=e.length,s=1.5,o=.5;gsap.set(e,{opacity:0}),gsap.set(e[0],{opacity:1}),preloadImages(e,()=>{const t=gsap.timeline({repeat:-1,defaults:{duration:s,ease:"power2.inOut"}});for(let s=0;s<n;s++){const i=e[(s+1)%n];t.to(i,{opacity:1,scale:1.05},"<0.5").to(e[s],{opacity:0,scale:1},`+=${o}`)}})}function addNavbarAnimation(){gsap.set(".navbar",{opacity:0,y:-50});const e=document.querySelector(".navbar");gsap.to(".navbar",{opacity:1,y:0,duration:1,ease:"Power2.out",scrollTrigger:{trigger:"#highlight-wrapper",start:"top 50%",toggleActions:"play none none reverse"}})}function loadProductionCountdown(e){if(typeof e=="string")try{e=JSON.parse(e)}catch(t){console.error("Failed to parse date array:",t),e=[]}const n=Math.floor(Date.now()/1e3),s=e.map(e=>Math.floor(new Date(e).getTime()/1e3)),t=s.filter(e=>e>n),o=document.querySelector(".countdown-box");if(t.length===0){o.style.display="none";return}const i=Math.min(...t);var a=new FlipDown(i,{theme:"dark",headings:["Dagen","Uren","Minuten","Seconden"]}).start()}function batchSectionAnimations(){document.querySelectorAll(".animated-panel .section-title").forEach(e=>{const t=e.textContent.split("");e.innerHTML=t.map(e=>`<span>${e}</span>`).join("")}),gsap.set(".animated-panel .section-title span",{opacity:0,y:20}),ScrollTrigger.batch(".animated-panel",{interval:.1,start:"top 80%",end:"bottom 20%",once:!0,onEnter:e=>{e.forEach(e=>{const n=Array.from(e.querySelectorAll(".section-title span")),t=e.querySelector(".section-content");gsap.to(n,{opacity:1,y:0,duration:.8,stagger:.05,ease:"power3.out"}),t&&gsap.fromTo(t,{opacity:0,y:40},{opacity:1,y:0,duration:2,ease:"bounce.out"})})}})}function loadBurgerMenu(){$(".navbar-burger").click(function(){$(".navbar-burger").toggleClass("is-active"),$(".navbar-menu").toggleClass("is-active")})}function hideExpiredElements(){const e=document.querySelectorAll(".hideable");e.forEach(e=>{const t=e.getAttribute("data-hide-after");if(t){let n;t.includes(" ")?n=new Date(t.replace(" ","T")):n=new Date(t+"T00:00");const s=new Date;s>n&&(e.style.display="none")}})}